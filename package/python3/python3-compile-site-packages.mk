################################################################################
#
# python3-compile-site-packages
#
################################################################################

PYTHON3_COMPILE_SITE_PACKAGES_DEPENDENCIES = python3

define PYTHON3_COMPILE_SITE_PACKAGES
	PYTHONPATH="$(TARGET_PYTHON_PATH)" \
	$(HOST_PYTHON_BINARY) \
		$(PKG_PYTHON_PROJECT_BASE)/Lib/compileall.py \
			$(if $(VERBOSE),,-q) \
			-s $(TARGET_DIR) \
			-p / \
			$(TARGET_PYTHON_SITE_PACKAGES_DIR)
endef
PYTHON3_COMPILE_SITE_PACKAGES_INDIVIDUAL_HOOKS += PYTHON3_COMPILE_SITE_PACKAGES

python3-compile-site-packages: | $(TARGET_DIR)
	$(call virtual-package)

PHONY += python3-compile-site-packages
